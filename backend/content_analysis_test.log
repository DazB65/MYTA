2025-07-10 08:47:26,077 - ERROR - âŒ Failed to import Content Analysis Agent: No module named 'googleapiclient'
2025-07-10 08:47:26,078 - INFO - ğŸš€ Starting Content Analysis Agent Test Suite
2025-07-10 08:47:26,078 - INFO - ============================================================
2025-07-10 08:47:26,078 - ERROR - âŒ Cannot run tests - agent function not available
2025-07-10 08:47:26,078 - INFO - 
ğŸ’¾ Test report saved to: content_analysis_test_report_20250710_084726.json
2025-07-10 08:47:26,078 - INFO - 
ğŸ‰ Test suite completed successfully!
2025-07-10 08:47:59,747 - INFO - âœ… Content Analysis Agent imported successfully
2025-07-10 08:47:59,747 - INFO - ğŸš€ Starting Content Analysis Agent Test Suite
2025-07-10 08:47:59,747 - INFO - ============================================================
2025-07-10 08:47:59,747 - INFO - 
ğŸ“‹ Testing Category: Basic Performance Analysis
2025-07-10 08:47:59,747 - INFO - ----------------------------------------
2025-07-10 08:47:59,747 - INFO - ğŸ§ª Executing test: Basic Performance Analysis
2025-07-10 08:47:59,747 - WARNING - YOUTUBE_API_KEY not set - using demo mode
2025-07-10 08:47:59,747 - WARNING - GEMINI_API_KEY not set - using demo mode
2025-07-10 08:47:59,748 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-10 08:47:59,750 - INFO - Content Analysis Agent initialized and ready for boss agent tasks
2025-07-10 08:48:00,040 - ERROR - YouTube API error: <HttpError 400 when requesting https://youtube.googleapis.com/youtube/v3/videos?part=snippet%2Cstatistics%2CcontentDetails&id=test_video_001%2Ctest_video_002%2Ctest_video_003&key=demo_key&alt=json returned "API key not valid. Please pass a valid API key.". Details: "[{'message': 'API key not valid. Please pass a valid API key.', 'domain': 'global', 'reason': 'badRequest'}]">
2025-07-10 08:48:00,676 - ERROR - Gemini analysis error: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-07-10 08:48:00,676 - INFO - Cached content analysis for key: 9b074fdf...
2025-07-10 08:48:00,676 - INFO - Content Analysis Agent completed task for boss agent. Request ID: test_basic_cec8f677
2025-07-10 08:48:00,676 - INFO - âœ… Test completed: Basic Performance Analysis - Time: 0.93s
2025-07-10 08:48:00,676 - INFO - âœ… All required performance metrics present
2025-07-10 08:48:00,676 - INFO - âœ… Basic Performance Analysis tests completed
2025-07-10 08:48:00,676 - INFO - 
ğŸ“‹ Testing Category: Thumbnail & Title Analysis
2025-07-10 08:48:00,676 - INFO - ----------------------------------------
2025-07-10 08:48:00,677 - INFO - ğŸ§ª Executing test: Thumbnail & Title Analysis
2025-07-10 08:48:00,797 - ERROR - YouTube API error: <HttpError 400 when requesting https://youtube.googleapis.com/youtube/v3/videos?part=snippet%2Cstatistics%2CcontentDetails&id=test_video_003%2Ctest_video_004&key=demo_key&alt=json returned "API key not valid. Please pass a valid API key.". Details: "[{'message': 'API key not valid. Please pass a valid API key.', 'domain': 'global', 'reason': 'badRequest'}]">
2025-07-10 08:48:01,539 - ERROR - Gemini analysis error: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-07-10 08:48:01,540 - INFO - Cached content analysis for key: bf4c93ab...
2025-07-10 08:48:01,540 - INFO - Content Analysis Agent completed task for boss agent. Request ID: test_thumbnail_5a7b053a
2025-07-10 08:48:01,540 - WARNING - âš ï¸ Only found 0/4 expected insights
2025-07-10 08:48:01,540 - INFO - âœ… Test completed: Thumbnail & Title Analysis - Time: 0.86s
2025-07-10 08:48:01,541 - WARNING - âš ï¸ No specific thumbnail/title insights generated
2025-07-10 08:48:01,541 - INFO - âœ… Thumbnail & Title Analysis tests completed
2025-07-10 08:48:01,541 - INFO - 
ğŸ“‹ Testing Category: Content Quality Assessment
2025-07-10 08:48:01,541 - INFO - ----------------------------------------
2025-07-10 08:48:01,541 - INFO - ğŸ§ª Executing test: Content Quality Assessment
2025-07-10 08:48:01,666 - ERROR - YouTube API error: <HttpError 400 when requesting https://youtube.googleapis.com/youtube/v3/videos?part=snippet%2Cstatistics%2CcontentDetails&id=test_video_001%2Ctest_video_004%2Ctest_video_005&key=demo_key&alt=json returned "API key not valid. Please pass a valid API key.". Details: "[{'message': 'API key not valid. Please pass a valid API key.', 'domain': 'global', 'reason': 'badRequest'}]">
2025-07-10 08:48:01,870 - ERROR - Gemini analysis error: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-07-10 08:48:01,870 - INFO - Cached content analysis for key: a88ba8f0...
2025-07-10 08:48:01,870 - INFO - Content Analysis Agent completed task for boss agent. Request ID: test_quality_c1fd2470
2025-07-10 08:48:01,871 - WARNING - âš ï¸ Only found 1/4 expected insights
2025-07-10 08:48:01,871 - INFO - âœ… Test completed: Content Quality Assessment - Time: 0.33s
2025-07-10 08:48:01,871 - INFO - âœ… Quality score generated: 0.0
2025-07-10 08:48:01,871 - INFO - âœ… Quality score within expected range (0-10)
2025-07-10 08:48:01,871 - INFO - âœ… Content Quality Assessment tests completed
2025-07-10 08:48:01,871 - INFO - 
ğŸ“‹ Testing Category: Retention Pattern Analysis
2025-07-10 08:48:01,871 - INFO - ----------------------------------------
2025-07-10 08:48:01,871 - INFO - ğŸ§ª Executing test: Retention Pattern Analysis
2025-07-10 08:48:01,994 - ERROR - YouTube API error: <HttpError 400 when requesting https://youtube.googleapis.com/youtube/v3/videos?part=snippet%2Cstatistics%2CcontentDetails&id=test_video_002%2Ctest_video_003&key=demo_key&alt=json returned "API key not valid. Please pass a valid API key.". Details: "[{'message': 'API key not valid. Please pass a valid API key.', 'domain': 'global', 'reason': 'badRequest'}]">
2025-07-10 08:48:02,719 - ERROR - Gemini analysis error: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-07-10 08:48:02,719 - INFO - Cached content analysis for key: 16c43cc1...
2025-07-10 08:48:02,719 - INFO - Content Analysis Agent completed task for boss agent. Request ID: test_retention_f55605af
2025-07-10 08:48:02,719 - INFO - âœ… Test completed: Retention Pattern Analysis - Time: 0.85s
2025-07-10 08:48:02,719 - WARNING - âš ï¸ Limited retention-specific analysis detected
2025-07-10 08:48:02,719 - INFO - âœ… Retention Pattern Analysis tests completed
2025-07-10 08:48:02,720 - INFO - 
ğŸ“‹ Testing Category: Comparative Performance
2025-07-10 08:48:02,720 - INFO - ----------------------------------------
2025-07-10 08:48:02,720 - INFO - ğŸ§ª Executing test: Comparative Performance Analysis
2025-07-10 08:48:02,846 - ERROR - Error getting channel averages: <HttpError 400 when requesting https://youtube.googleapis.com/youtube/v3/search?part=id&channelId=ComparativeTest_Channel&type=video&order=date&maxResults=20&key=demo_key&alt=json returned "API key not valid. Please pass a valid API key.". Details: "[{'message': 'API key not valid. Please pass a valid API key.', 'domain': 'global', 'reason': 'badRequest'}]">
2025-07-10 08:48:03,059 - ERROR - Gemini analysis error: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-07-10 08:48:03,060 - INFO - Cached content analysis for key: 5e325a9f...
2025-07-10 08:48:03,060 - INFO - Content Analysis Agent completed task for boss agent. Request ID: test_comparative_40de049f
2025-07-10 08:48:03,060 - INFO - âœ… Test completed: Comparative Performance Analysis - Time: 0.34s
2025-07-10 08:48:03,060 - INFO - âœ… Performance vs average: 92.4
2025-07-10 08:48:03,061 - INFO - âœ… Performance comparison metric properly formatted
2025-07-10 08:48:03,061 - INFO - âœ… Comparative Performance tests completed
2025-07-10 08:48:03,061 - INFO - 
ğŸ“‹ Testing Category: Domain Validation
2025-07-10 08:48:03,061 - INFO - ----------------------------------------
2025-07-10 08:48:03,061 - INFO - ğŸ§ª Executing test: Domain Validation - Valid Request
2025-07-10 08:48:03,185 - ERROR - YouTube API error: <HttpError 400 when requesting https://youtube.googleapis.com/youtube/v3/videos?part=snippet%2Cstatistics%2CcontentDetails&id=test_video_001&key=demo_key&alt=json returned "API key not valid. Please pass a valid API key.". Details: "[{'message': 'API key not valid. Please pass a valid API key.', 'domain': 'global', 'reason': 'badRequest'}]">
2025-07-10 08:48:03,901 - ERROR - Gemini analysis error: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-07-10 08:48:03,901 - INFO - Cached content analysis for key: 6ddb2584...
2025-07-10 08:48:03,902 - INFO - Content Analysis Agent completed task for boss agent. Request ID: test_domain_valid_693b37a3
2025-07-10 08:48:03,902 - INFO - âœ… Test completed: Domain Validation - Valid Request - Time: 0.84s
2025-07-10 08:48:03,902 - INFO - âœ… Valid content analysis request properly handled
2025-07-10 08:48:03,902 - INFO - ğŸ§ª Executing test: Domain Validation - Invalid Request
2025-07-10 08:48:03,902 - INFO - âœ… Test completed: Domain Validation - Invalid Request - Time: 0.00s
2025-07-10 08:48:03,902 - INFO - âœ… Invalid request properly rejected with domain mismatch
2025-07-10 08:48:03,902 - INFO - âœ… Domain Validation tests completed
2025-07-10 08:48:03,902 - INFO - 
ğŸ“‹ Testing Category: Cache Performance
2025-07-10 08:48:03,902 - INFO - ----------------------------------------
2025-07-10 08:48:03,903 - INFO - ğŸ”„ Testing cache performance - First request (cache miss expected)
2025-07-10 08:48:03,903 - INFO - ğŸ§ª Executing test: Cache Test - First Request
2025-07-10 08:48:04,026 - ERROR - YouTube API error: <HttpError 400 when requesting https://youtube.googleapis.com/youtube/v3/videos?part=snippet%2Cstatistics%2CcontentDetails&id=test_video_001%2Ctest_video_002&key=demo_key&alt=json returned "API key not valid. Please pass a valid API key.". Details: "[{'message': 'API key not valid. Please pass a valid API key.', 'domain': 'global', 'reason': 'badRequest'}]">
2025-07-10 08:48:04,236 - ERROR - Gemini analysis error: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-07-10 08:48:04,236 - INFO - Cached content analysis for key: 6f707dfa...
2025-07-10 08:48:04,236 - INFO - Content Analysis Agent completed task for boss agent. Request ID: test_cache_1_75a8d968
2025-07-10 08:48:04,236 - INFO - âœ… Test completed: Cache Test - First Request - Time: 0.33s
2025-07-10 08:48:04,237 - INFO - First request - Cache hit: False, Time: 0.33s
2025-07-10 08:48:04,237 - INFO - ğŸ”„ Testing cache performance - Second request (cache hit expected)
2025-07-10 08:48:04,237 - INFO - ğŸ§ª Executing test: Cache Test - Second Request
2025-07-10 08:48:04,237 - INFO - Content analysis cache hit for key: 6f707dfa...
2025-07-10 08:48:04,237 - INFO - âœ… Test completed: Cache Test - Second Request - Time: 0.00s
2025-07-10 08:48:04,237 - INFO - Second request - Cache hit: True, Time: 0.00s
2025-07-10 08:48:04,237 - INFO - âœ… Cache working correctly - 100.0% faster
2025-07-10 08:48:04,237 - INFO - âœ… Cache provides significant performance improvement
2025-07-10 08:48:04,237 - INFO - âœ… Cache Performance tests completed
2025-07-10 08:48:04,237 - INFO - 
ğŸ“‹ Testing Category: Error Handling
2025-07-10 08:48:04,237 - INFO - ----------------------------------------
2025-07-10 08:48:04,237 - INFO - ğŸ§ª Testing error handling: Missing Context
2025-07-10 08:48:04,237 - INFO - ğŸ§ª Executing test: Error Handling - Missing Context
2025-07-10 08:48:04,354 - ERROR - Error getting channel averages: <HttpError 400 when requesting https://youtube.googleapis.com/youtube/v3/search?part=id&channelId=unknown&type=video&order=date&maxResults=20&key=demo_key&alt=json returned "API key not valid. Please pass a valid API key.". Details: "[{'message': 'API key not valid. Please pass a valid API key.', 'domain': 'global', 'reason': 'badRequest'}]">
2025-07-10 08:48:05,093 - ERROR - Gemini analysis error: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-07-10 08:48:05,093 - INFO - Cached content analysis for key: b3886c79...
2025-07-10 08:48:05,093 - INFO - Content Analysis Agent completed task for boss agent. Request ID: test_error_1_9b97a464
2025-07-10 08:48:05,093 - INFO - âœ… Test completed: Error Handling - Missing Context - Time: 0.86s
2025-07-10 08:48:05,093 - INFO - âœ… Request processed despite malformed input: Missing Context
2025-07-10 08:48:05,093 - INFO - ğŸ§ª Testing error handling: Invalid Channel ID
2025-07-10 08:48:05,094 - INFO - ğŸ§ª Executing test: Error Handling - Invalid Channel ID
2025-07-10 08:48:05,214 - ERROR - Error getting channel averages: <HttpError 400 when requesting https://youtube.googleapis.com/youtube/v3/search?part=id&channelId=&type=video&order=date&maxResults=20&key=demo_key&alt=json returned "API key not valid. Please pass a valid API key.". Details: "[{'message': 'API key not valid. Please pass a valid API key.', 'domain': 'global', 'reason': 'badRequest'}]">
2025-07-10 08:48:05,432 - ERROR - Gemini analysis error: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-07-10 08:48:05,433 - INFO - Cached content analysis for key: 2bfad59e...
2025-07-10 08:48:05,433 - INFO - Content Analysis Agent completed task for boss agent. Request ID: test_error_2_60804fa6
2025-07-10 08:48:05,433 - INFO - âœ… Test completed: Error Handling - Invalid Channel ID - Time: 0.34s
2025-07-10 08:48:05,433 - INFO - âœ… Request processed despite malformed input: Invalid Channel ID
2025-07-10 08:48:05,433 - INFO - ğŸ§ª Testing error handling: Invalid Time Period
2025-07-10 08:48:05,433 - INFO - ğŸ§ª Executing test: Error Handling - Invalid Time Period
2025-07-10 08:48:05,553 - ERROR - Error getting channel averages: <HttpError 400 when requesting https://youtube.googleapis.com/youtube/v3/search?part=id&channelId=ErrorTest_Channel&type=video&order=date&maxResults=20&key=demo_key&alt=json returned "API key not valid. Please pass a valid API key.". Details: "[{'message': 'API key not valid. Please pass a valid API key.', 'domain': 'global', 'reason': 'badRequest'}]">
2025-07-10 08:48:06,267 - ERROR - Gemini analysis error: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-07-10 08:48:06,267 - INFO - Cached content analysis for key: b066e1b2...
2025-07-10 08:48:06,267 - INFO - Content Analysis Agent completed task for boss agent. Request ID: test_error_3_88f5cd59
2025-07-10 08:48:06,268 - INFO - âœ… Test completed: Error Handling - Invalid Time Period - Time: 0.83s
2025-07-10 08:48:06,268 - INFO - âœ… Request processed despite malformed input: Invalid Time Period
2025-07-10 08:48:06,268 - INFO - âœ… Error Handling tests completed
2025-07-10 08:48:06,268 - INFO - 
ğŸ“‹ Testing Category: Response Validation
2025-07-10 08:48:06,268 - INFO - ----------------------------------------
2025-07-10 08:48:06,268 - INFO - ğŸ§ª Executing test: Response Structure Validation
2025-07-10 08:48:06,389 - ERROR - YouTube API error: <HttpError 400 when requesting https://youtube.googleapis.com/youtube/v3/videos?part=snippet%2Cstatistics%2CcontentDetails&id=test_video_001%2Ctest_video_002&key=demo_key&alt=json returned "API key not valid. Please pass a valid API key.". Details: "[{'message': 'API key not valid. Please pass a valid API key.', 'domain': 'global', 'reason': 'badRequest'}]">
2025-07-10 08:48:06,620 - ERROR - Gemini analysis error: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-07-10 08:48:06,620 - INFO - Cached content analysis for key: f55b1820...
2025-07-10 08:48:06,620 - INFO - Content Analysis Agent completed task for boss agent. Request ID: test_validation_7c7b0b3a
2025-07-10 08:48:06,620 - INFO - âœ… Test completed: Response Structure Validation - Time: 0.35s
2025-07-10 08:48:06,620 - INFO - âœ… All required response fields present
2025-07-10 08:48:06,620 - INFO - âœ… Correct agent_type specified
2025-07-10 08:48:06,620 - INFO - âœ… for_boss_agent_only flag correctly set
2025-07-10 08:48:06,621 - INFO - âœ… Analysis field 'summary' present
2025-07-10 08:48:06,621 - INFO - âœ… Analysis field 'key_insights' present
2025-07-10 08:48:06,621 - INFO - âœ… Analysis field 'recommendations' present
2025-07-10 08:48:06,621 - INFO - âœ… Confidence score in valid range: 0.92
2025-07-10 08:48:06,621 - INFO - âœ… Response Validation tests completed
2025-07-10 08:48:06,621 - INFO - 
ğŸ“Š TEST SUITE SUMMARY
2025-07-10 08:48:06,621 - INFO - ========================================
2025-07-10 08:48:06,621 - INFO - Total Tests: 13
2025-07-10 08:48:06,621 - INFO - Passed: 13
2025-07-10 08:48:06,621 - INFO - Failed: 0
2025-07-10 08:48:06,621 - INFO - Success Rate: 100.0%
2025-07-10 08:48:06,621 - INFO - Average Response Time: 0.53s
2025-07-10 08:48:06,622 - INFO - Cache Hit Rate: 7.7%
2025-07-10 08:48:06,622 - INFO - Total Tokens Used: 43,780
2025-07-10 08:48:06,622 - INFO - 
ğŸ‰ Test Suite Completed!
2025-07-10 08:48:06,622 - INFO - ============================================================
2025-07-10 08:48:06,623 - INFO - 
ğŸ’¾ Test report saved to: content_analysis_test_report_20250710_084806.json
2025-07-10 08:48:06,623 - INFO - 
ğŸ’¡ RECOMMENDATIONS:
2025-07-10 08:48:06,623 - INFO -    1. Cache hit rate is low - review caching strategy
2025-07-10 08:48:06,623 - INFO -    2. Average confidence score is low - review analysis quality
2025-07-10 08:48:06,623 - INFO - 
ğŸ‰ Test suite completed successfully!
